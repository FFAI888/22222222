<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DApp 主页 v0.33</title>
<style>
:root{
    --topbar-height:56px;
    --nav-height:70px;
}
html,body{margin:0;padding:0;height:100%;font-family:Arial,sans-serif;display:flex;flex-direction:column;}
body{
    background-color:#f0f2f5;
    transition: background-color 0.6s ease,color 0.4s ease;
}

/* 顶部条 */
.topbar{
    position:fixed;top:0;left:0;right:0;height:var(--topbar-height);
    display:flex;align-items:center;gap:12px;padding:0 14px;
    background:rgba(255,255,255,0.6);backdrop-filter:blur(6px);
    border-bottom:1px solid rgba(0,0,0,0.06);z-index:30;
}
.logo-wrap{
    display:flex;align-items:center;gap:10px;cursor:pointer;
}
.logo-bg{
    width:44px;height:44px;
    background:#e6f0ff;
    border-radius:8px;
    display:flex;justify-content:center;align-items:center;
}
.logo-img{
    width:36px;height:36px;border-radius:6px;object-fit:cover;
}
.title-wrap{
    display:flex;flex-direction:column;justify-content:center;
}
.app-title{font-size:18px;font-weight:600;color:#222;margin:0;letter-spacing:5px;}
.logo-subtext{font-size:12px;color:#666;margin:0;}

/* 主体 */
.main-wrap{flex:1;display:flex;flex-direction:column;padding-top:calc(var(--topbar-height)+10px);padding-bottom:calc(var(--nav-height)+10px);box-sizing:border-box;}
.content{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:20px;}
.content h2{color:#333;margin:0 0 10px 0;transition:color 0.4s ease;}
.wallet-address{font-weight:bold;color:#4CAF50;}

/* 个人中心 */
.profile-container{display:flex;flex-direction:column;align-items:center;margin-top:15px;}
.profile-avatar{width:80px;height:80px;border-radius:50%;background:#ddd url('https://img.icons8.com/fluency/96/000000/user-male-circle.png') no-repeat center;background-size:cover;margin-bottom:10px;border:2px solid #aaa;}
.profile-info{font-size:14px;color:#555;margin-bottom:15px;text-align:center;}
.profile-buttons{display:flex;gap:10px;}
.profile-buttons button{padding:8px 16px;border:none;border-radius:8px;cursor:pointer;font-size:14px;transition:background 0.3s,transform 0.2s;}
.profile-buttons button:first-child{background:#4CAF50;color:#fff;}
.profile-buttons button:last-child{background:#f44336;color:#fff;}
.profile-buttons button:hover{transform:scale(1.03);}

/* 底部导航 */
.bottom-nav{display:flex;justify-content:space-around;background:linear-gradient(270deg,#e0e0e0cc,#d0e6f5cc,#e0e0e0cc);backdrop-filter:blur(10px);border-top:1px solid #ccc;height:var(--nav-height);position:fixed;left:0;right:0;bottom:0;z-index:20;animation:navGradientFlow 10s ease-in-out infinite;}
.bottom-nav button{flex:1;background:none;border:none;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:16px;color:#555;border-radius:12px;transition:transform 0.2s,color 0.3s,box-shadow 0.3s;overflow:hidden;position:relative;padding:6px 4px;}
.bottom-nav button img{width:28px;height:28px;margin-bottom:4px;transition:filter .3s,transform .3s;filter:grayscale(100%);}
.bottom-nav button.active{color:#fff;background:linear-gradient(135deg,#4CAF50,#81C784,#A5D6A7,#4CAF50);animation:gradientMoveButton 5s linear infinite,activeFloatScale 2s ease-in-out infinite;box-shadow:0 4px 12px rgba(0,0,0,0.25);background-size:300% 300%;}
.bottom-nav button.active img{filter:grayscale(0%) brightness(1.2);transform:scale(1.15);}
.bottom-nav button:hover{transform:scale(1.05);box-shadow:0 2px 6px rgba(0,0,0,0.15);}
.bottom-nav button:active{transform:scale(1.2);transition:transform .15s ease-out;}

/* 波纹 */
.ripple{position:absolute;border-radius:50%;transform:scale(0);animation:ripple .6s linear;background-color:rgba(255,255,255,0.6);pointer-events:none;}
@keyframes ripple{to{transform:scale(4);opacity:0;}}
@keyframes activeFloatScale{0%,100%{transform:translateY(0) scale(1);}50%{transform:translateY(-3px) scale(1.05);}}
@keyframes gradientMoveButton{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
@keyframes navGradientFlow{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}

@media(max-width:420px){.app-title{font-size:16px;letter-spacing:4px;}.topbar{padding:0 10px;}.logo-img{width:36px;height:36px;}.bottom-nav button img{width:26px;height:26px;}.content h2{font-size:18px;}}
</style>
</head>
<body>

<!-- 顶部 -->
<div class="topbar">
    <div class="logo-wrap">
        <div class="logo-bg">
            <img class="logo-img" id="logoImg" src="https://img.icons8.com/fluency/96/000000/blockchain.png" alt="logo">
        </div>
        <input type="file" id="logoInput" accept="image/*" style="display:none;">
    </div>
    <div class="title-wrap">
        <div class="app-title">融 链</div>
        <div class="logo-subtext">RongChain</div>
    </div>
</div>

<!-- 主体 -->
<div class="main-wrap">
    <div class="content" id="mainContent">
        <h2>欢迎来到 DApp 主页！</h2>
        <div class="wallet-address" id="walletAddress">加载钱包地址...</div>
    </div>
</div>

<!-- 底部导航 -->
<div class="bottom-nav" id="bottomNav">
    <button id="homeBtn" class="active"><img src="https://img.icons8.com/fluency/48/000000/home.png" alt="首页">首页</button>
    <button id="groupBtn"><img src="https://img.icons8.com/fluency/48/000000/conference.png" alt="拼团">拼团</button>
    <button id="earnBtn"><img src="https://img.icons8.com/fluency/48/000000/coin-in-hand.png" alt="赚币">赚币</button>
    <button id="swapBtn"><img src="https://img.icons8.com/fluency/48/000000/exchange.png" alt="兑换">兑换</button>
    <button id="profileBtn"><img src="https://img.icons8.com/fluency/48/000000/user-male-circle.png" alt="我的">我的</button>
</div>

<script>
/* 钱包地址显示 */
const urlParams = new URLSearchParams(window.location.search);
const account = urlParams.get('account');
document.getElementById('walletAddress').innerText = account?"已连接钱包: "+account:"未获取到钱包地址";

/* 主体 & 导航 */
const mainContent=document.getElementById('mainContent');
const bottomNav=document.getElementById('bottomNav');
const homeBtn=document.getElementById('homeBtn');
const groupBtn=document.getElementById('groupBtn');
const earnBtn=document.getElementById('earnBtn');
const swapBtn=document.getElementById('swapBtn');
const profileBtn=document.getElementById('profileBtn');
const buttons=[homeBtn,groupBtn,earnBtn,swapBtn,profileBtn];

const navGradients={
    homeBtn:'linear-gradient(270deg,#e0e0e0cc,#d0e6f5cc,#e0e0e0cc)',
    groupBtn:'linear-gradient(270deg,#ffe6cc,#ffd9b3,#ffe6cc)',
    earnBtn:'linear-gradient(270deg,#e6f5cc,#d9f5b3,#e6f5cc)',
    swapBtn:'linear-gradient(270deg,#cce0ff,#b3d9ff,#cce0ff)',
    profileBtn:'linear-gradient(270deg,#f0d6ff,#e0b3ff,#f0d6ff)'
};
const pageBackgrounds={homeBtn:'#f5f7fa',groupBtn:'#fff3e6',earnBtn:'#f3ffe6',swapBtn:'#e6f0ff',profileBtn:'#faf0ff'};

function setActive(btn){
    buttons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    bottomNav.style.background = navGradients[btn.id]||navGradients.homeBtn;
    document.body.style.backgroundColor = pageBackgrounds[btn.id]||'#f0f2f5';
}
function updateContent(title,extraHtml=''){
    mainContent.innerHTML=`<h2>${title}</h2><div class="wallet-address">${account?"已连接钱包: "+account:"未获取到钱包地址"}</div>${extraHtml}`;
}
function addRippleEffect(e){
    const t=e.currentTarget;
    const rect=t.getBoundingClientRect();
    const x=e.clientX-rect.left;
    const y=e.clientY-rect.top;
    const ripple=document.createElement('span');
    ripple.className='ripple';
    ripple.style.left=x+'px';
    ripple.style.top=y+'px';
    t.appendChild(ripple);
    setTimeout(()=>ripple.remove(),600);
}

/* 导航绑定 */
homeBtn.addEventListener('click',e=>{setActive(homeBtn);updateContent('欢迎来到 DApp 主页！');addRippleEffect(e);});
groupBtn.addEventListener('click',e=>{setActive(groupBtn);updateContent('这里是拼团页面（占位）');addRippleEffect(e);});
earnBtn.addEventListener('click',e=>{setActive(earnBtn);updateContent('这里是赚币页面（占位）');addRippleEffect(e);});
swapBtn.addEventListener('click',e=>{setActive(swapBtn);updateContent('这里是兑换页面（占位）');addRippleEffect(e);});
profileBtn.addEventListener('click',e=>{
    setActive(profileBtn);
    const html=`<div class="profile-container">
        <div class="profile-avatar"></div>
        <div class="profile-info">用户名: 占位用户<br>钱包状态: ${account?'已连接':'未连接'}<br>钱包余额: 0.0 ETH</div>
        <div class="profile-buttons"><button onclick="alert('修改资料功能开发中')">修改资料</button><button onclick="alert('退出登录功能开发中')">退出登录</button></div>
    </div>`;
    updateContent('个人中心',html);
    addRippleEffect(e);
});

document.addEventListener('DOMContentLoaded',()=>{setActive(homeBtn);updateContent('欢迎来到 DApp 主页！');});

/* Logo 上传 + localStorage 保存 */
const logoInput=document.getElementById('logoInput');
const logoImg=document.getElementById('logoImg');
try{
    const savedLogo = localStorage.getItem('customLogoDataUrl');
    if(savedLogo) logoImg.src = savedLogo;
}catch(e){console.warn(e);}
logoImg.parentElement.addEventListener('click',()=> logoInput.click());
logoInput.addEventListener('change',(ev)=>{
    const file = ev.target.files[0];
    if(!file || !file.type.startsWith('image/')){alert('请选择图片文件');return;}
    const reader = new FileReader();
    reader.onload=function(evt){
        const dataUrl=evt.target.result;
        logoImg.src = dataUrl;
        try{localStorage.setItem('customLogoDataUrl',dataUrl);}catch(e){console.warn(e);}
    }
    reader.readAsDataURL(file);
});
</script>

</body>
</html>
